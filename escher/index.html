<!doctype html>
<html lang="en">
<head>

<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Material Design Lite -->
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.red-amber.min.css" />
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
<link href='https://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Vast+Shadow' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Baloo+Da' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Amatic+SC:400,700' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">

<!-- Moment.js -->
<script src="moment.min.js"></script>

<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<!-- jQuery UI -->
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/5.8.2/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyABCaBBY04zpvIl1efmOPrKwNtPkgTXfqs",
    authDomain: "team-sidney.firebaseapp.com",
    databaseURL: "https://team-sidney.firebaseio.com",
    projectId: "team-sidney",
    storageBucket: "team-sidney.appspot.com",
  };
  firebase.initializeApp(config);
</script>

<!-- Main CSS -->
<link rel="stylesheet" href="main.css" type="text/css">

</style>

</head>
<body>

<div aria-live="assertive" aria-atomic="true" aria-relevant="text" class="mdl-snackbar mdl-js-snackbar">
    <div class="mdl-snackbar__text"></div>
    <button type="button" class="mdl-snackbar__action"></button>
</div>

<div id="header">
  <div id="headercontents">
    <span class="title"><img height="50px" src="tselogo.png"></img> Escher</span>
    <span id="userinfo">
      <div role="group">
        <button type="button" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" id="login">Login</button>
        <button type="button" class="mdl-button mdl-js-button mdl-button--colored mdl-button--raised mdl-js-ripple-effect" id="logout">Logout</button>
      </div>
    </span>
  </div>
</div>

<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">

  <header class="mdl-layout__header" id="tabheader">
    <div class="mdl-layout__tab-bar mdl-js-ripple-effect">
      <a id="etch-tab-button" href="#scroll-tab-etch" class="mdl-layout__tab is-active">Etch</a>
      <a id="files-tab-button" href="#scroll-tab-files" class="mdl-layout__tab">Files</a>
      <a id="devices-tab-button" href="#scroll-tab-devices" class="mdl-layout__tab">Devices</a>
      <a id="firmware-tab-button" href="#scroll-tab-firmware" class="mdl-layout__tab">Firmware</a>
    </div>
  </header>

  <main class="mdl-layout__content">

    <section class="mdl-layout__tab-panel is-active" id="scroll-tab-etch">
      <div class="tab-contents">
        <div class="mdl-grid">

          <div class="mdl-cell mdl-cell--6-col">
            <canvas id="etchCanvas" class="responsive" width=1326 height=1081></canvas>
          </div>

          <div class="mdl-cell mdl-cell--4-col">
            <div id="fileSelector" class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
              <div>
                <label for="fileSelect" class="mdl-textfield__label">Gcode file</label>
              </div>
              <div>
                <select class="mdl-textfield__input" id="fileSelect"></select>
              </div>
            </div>
            <div id="deviceSelector" class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
              <div>
                <label for="deviceSelect" class="mdl-textfield__label">Device</label>
              </div>
              <div>
                <select class="mdl-textfield__input" id="deviceSelect"></select>
              </div>
            </div>
            <div role="group">
              <button id="etchButton" type="button" class="mdl-button mdl-button--raised mdl-button--accent" disabled>Etch!</button>
              <button id="stopButton" type="button" class="mdl-button mdl-button--raised mdl-button--colored" disabled>Stop</button>
            </div>

            <div role="group" id="controlButtons">
              <button id="controlLeft" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab"><i class="material-icons">arrow_back</i></button>
              <button id="controlRight" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab"><i class="material-icons">arrow_forward</i></button>
              <button id="controlUp" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab"><i class="material-icons">arrow_upwards</i></button>
              <button id="controlDown" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab"><i class="material-icons">arrow_downwards</i></button>
              <button id="controlZoomIn" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab"><i class="material-icons">zoom_in</i></button>
              <button id="controlZoomOut" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab"><i class="material-icons">zoom_out</i></button>
              <button id="controlHome" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab"><i class="material-icons">home</i></button>
            </div>

            <div id="userDebug"></div>
          </div>

        </div>  <!-- Grid -->

        <!-- Upload Gcode fab -->
        <button id="fileUploadButton" class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored">
          <i class="material-icons">add_photo_alternate</i>
        </button>

        <div id="dberror" class="errormsg"></div>
        <div id="striplist" class="listgroup"></div>
      </div>
    </section>

    <section class="mdl-layout__tab-panel" id="scroll-tab-files">
      <div class="tab-contents">
        Files
        <div id="fileList" class="listgroup"></div>
        <button id="fileUploadButton" class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored">
          <i class="material-icons">add</i>
        </button>
      </div>
    </section>

    <section class="mdl-layout__tab-panel" id="scroll-tab-devices">
      <div class="tab-contents">
        Devices
        <div id="deviceList" class="listgroup"></div>
        <button id="fileUploadButton" class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored">
          <i class="material-icons">add</i>
        </button>
      </div>
    </section>

    <section class="mdl-layout__tab-panel" id="scroll-tab-firmware">
      <div class="tab-contents">
        Firmware
        <div id="firmwarelist" class="listgroup"></div>
        <button id="fileUploadButton" class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored">
          <i class="material-icons">add</i>
        </button>
      </div>
    </section>

  </main>
</div>

<!-- Upload Gcode dialog modal -->
<dialog id="uploadGcode" class="mdl-dialog">
<div class="uploadGcodeHeader">
  <div class="mdl-dialog__title" id="uploadGcodeTitle">
    Upload Gcode file
  </div>
</div>
<!-- Upload Gcode body -->
<div class="mdl-dialog__content" id="uploadGcodeBody">
  <label class="mdl-button mdl-button--colored mdl-js-button mdl-button--raised mdl-js-ripple-effect">
    Choose file <input id="uploadGcodeFile" type="file" style="display: none;">
  </label>
  <div class="uploadGcodeSelectedFile" id="uploadGcodeSelectedFile"></div>
  <div class="uploadGcodeError" id="uploadGcodeError"></div>
  <div id="uploadGcodeSpinner" class="mdl-progress mdl-js-progress mdl-progress__indeterminate"></div>
  <div id="uploadGcodeLink"></div>
  <div class="uploadGcodePreview">Preview</div>
  <div>
    <canvas id="previewCanvas" width=1326 height=1081></canvas>
  </div>
</div>
<div class="mdl-dialog__actions">
  <div role="group">
    <button id="uploadGcodeCancel" type="button" class="mdl-button">Cancel</button>
    <button id="uploadGcodeConfirm" type="button" class="mdl-button mdl-button--raised mdl-button--colored" disabled>Add</button>
  </div>
</div>
</dialog>

<!-- Etch control modal -->
<dialog id="etchControl" class="mdl-dialog">
<div class="etchControlHeader">
  <div class="mdl-dialog__title" id="etchControlTitle">
    Ready to Etch?
  </div>
</div>
<!-- Etch control body -->
<div class="mdl-dialog__content" id="etchControlBody">
  <div class="etchControlMessage" id="etchUploadingMessage">Uploading control data...</div>
  <div id="etchControlSpinner" class="mdl-progress mdl-js-progress mdl-progress__indeterminate"></div>
  <div class="etchControlMessage" id="etchReadyMessage">Ready to Etch</div>
</div>
<div class="mdl-dialog__actions">
  <div role="group">
    <button id="etchControlCancel" type="button" class="mdl-button">Cancel</button>
    <button id="etchControlStart" type="button" class="mdl-button mdl-button--raised mdl-button--colored" disabled>Start</button>
  </div>
</div>
</dialog>

<script src="gcode.js"></script>
<script src="main.js"></script>
</body>
</html>
